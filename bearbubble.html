<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Fish</title>
<link rel="stylesheet" type="text/css" href="css/style.css" />
<script src="js/jquery-1.7.2.min.js"></script>
<script src="js/jquery.moving-bubble.js"></script>
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
<script src="js/jquery.popupoverlay.js"></script>

</head>
<body>
    <div id="my_opening">
        <img src="images/meme.png" style="float:left, height:200px">
        <div class="textbox"><h1>Yo Welcome to the Forest. <br>Beware, trees are not your friend.<br> You know who DDoSki is. <br>Go find him.</h1></div>
       <button class="my_popup_close" id="close1">X</button>
    </div>

    <div class="myScore"> Score: 00</div>
    <div class="myLevel"> Level: 01</div>

    <div class="mainbody">
<!--         <img src="bear.gif" class="bears" alt="Bub 1" />
        <img src="bear.gif" class="bears" alt="Bub 2" />
        <img src="bear.gif" class="bears" alt="Bub 3" /> -->
    </div>

    <!-- <button class="my_popup_open">Open popup</button> -->
    
    <div id="my_popup">
        <img src="images/brofist.png" style="float:left">
        <h1>You did it! On to the next (harderrrrr) level, Bro!</h1>
       <button class="my_popup_close">X</button>
    </div>

    <div id="my_closing">
        <img src="images/brofist.png" style="float:left">
        <h1>Bro, You are really good with that mouse! Connect us!</h1>
       <button class="my_popup_close" id="close2">X</button>
    </div>

</body>

<script type="text/javascript">
    $(document).ready(function (e) {
    $('#my_popup').popup();
    $('#my_opening').popup('show');
    $('#close1').click(function(){
        $('#my_opening').popup('hide');
    })
    $('#my_closing').popup();

    var currScore = 5;
    // bearcount
    var bearNum = 5;
    var bearcounter = bearNum;
    var counter = bearcounter; 

    //treecount
    var treeNum = 50;
    var lvl = 1;
    
    // Generate Bear
    var b;
    function generate_bear (count) {
        while(count!=0) {
            b = $('<img src="bear.gif"/>').addClass('bears');
            $('body').append(b);
            count-=1;

            b.movingBubble();
            b.click(function(){
                $(this).movingBubble('stop').fadeOut(200);
                currScore += 5;
                counter--;
                // alert(counter);
                    if (counter <= 0) {
                        bearcounter+=1;
                        generate_bear(bearcounter);
                        counter = bearcounter;
                        lvl++;
                        if (lvl == 3) {
                            alert("Done!!");
                            $('#my_closing').popup('show');
                            $('#close2').click(function(){
                                $('#my_closing').popup('hide');
                            })
                        } else {
                            $('#my_popup').popup('show');
                        }
                        $('.myLevel').html('Level: '+ lvl);
                        currScore = 5;
                        $('.myScore').html('Score: '+ currScore);
                        treeNum += 30;
                        generate_tree(treeNum);
                    }
                $('.myScore').html('Score: '+ currScore);
            });
            
        }
    }
    generate_bear(bearNum);

    var g; var p;
    function generate_tree (count) {
        // Populate items
        while(count!=0){
            g = Math.floor(Math.random() * 4);
            p = $('<div/>').addClass('g' + g).addClass('level').addClass('parti');
            $('body').append(p);
            count-=1;

            p.movingBubble();
            // Tree Click
            p.click(function(){
                $(this).movingBubble('stop').fadeOut(200);
                currScore -= lvl;
                $('.myScore').html('Score: '+currScore);
                if (currScore < 0) {
                    alert("Yo! You went to the negative, stop sucking! fool.");
                }
            });
        }
    }
    generate_tree(treeNum);


});
</script>


</html>